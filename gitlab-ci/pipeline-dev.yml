include:
  - https://raw.githubusercontent.com/tickone/shared-configuration/master/gitlab-ci/gcr.yml
  - https://raw.githubusercontent.com/tickone/shared-configuration/master/gitlab-ci/template.yml
  - https://raw.githubusercontent.com/tickone/shared-configuration/master/gitlab-ci/regional-job.yml

workflow:
  rules:
    - if: $CI_COMMIT_BRANCH == "master"
      variables:
        BUILD: prod
        TAG: stable
    - if: $CI_COMMIT_BRANCH == "beta"
      variables:
        BUILD: beta
        TAG: beta
stages:
  - pre
  - build
  - test
  - deploy
  - release

variables:
  DEV_PIPELINE: true
